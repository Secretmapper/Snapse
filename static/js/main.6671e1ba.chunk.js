(this.webpackJsonpsnapse=this.webpackJsonpsnapse||[]).push([[0],{25:function(e,n,t){e.exports=t(43)},30:function(e,n,t){},43:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),o=t(12),i=t.n(o),c=(t(30),t(1)),u=t(4),s=t(2);function l(){var e=Object(c.a)(["\n  flex-direction: column;\n  flex-shrink: 0;\n  height: 100%;\n  width: 250px;\n  z-index: 2;\n"]);return l=function(){return e},e}function d(){var e=Object(c.a)(["\n  flex-direction: column;\n  flex: 1;\n  height: 100%;\n"]);return d=function(){return e},e}function f(){var e=Object(c.a)(["\n  display: flex;\n  flex-direction: row;\n  flex: 1;\n  height: 100%;\n  width: 100%;\n"]);return f=function(){return e},e}var p=function(e){return a.a.createElement(b,null,a.a.createElement(g,null,e.side),a.a.createElement(v,null,e.main))},b=s.b.div(f()),v=s.b.div(d()),g=s.b.div(l()),m=t(24),O=t(6),h=t(3),j=t(21),y=t.n(j);var k=function(){var e=Object(r.useRef)(null);return Object(r.useEffect)((function(){var n,t=e.current,r=0;return function e(){r++,t&&t.edges().animate({style:{"line-dash-offset":-r}}),n=requestAnimationFrame(e)}(),function(){n&&cancelAnimationFrame(n)}}),[]),[e,function(n){e.current=n}]};function x(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0;return!!e.match(new RegExp("(\\s|^)"+n+"(\\s|$)"))}var E={has:x,add:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0;return x(e,n)?e:e+" "+n},remove:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0;if(x(e,n)){var t=new RegExp("(\\s|^)"+n+"(\\s|$)");return e.replace(t," ")}return e}};var w=[{selector:".node--editing",style:{opacity:0}},{selector:".snapse-node, .snapse-output",style:{"background-opacity":"0","padding-top":"0","border-width":0,"text-halign":"left","text-valign":"top",color:"black",content:"data(label)"}},{selector:".snapse-node__rules, .snapse-node__output",style:{"background-color":"white","border-width":1,events:"no","text-wrap":"wrap","text-halign":"center","text-valign":"center",content:"data(label)",height:150,shape:"roundrectangle",width:100}},{selector:".snapse-node__rules--invalid",style:{"background-color":"#ffbbbb","border-color":"#ff4e4d"}},{selector:".snapse-node__output",style:{height:50,width:150}},{selector:".snapse-node__time, .snapse-node__spike",style:{"background-opacity":"0","text-halign":"center","text-valign":"center",content:"data(label)",events:"no",height:15,shape:"roundrectangle",width:50}},{selector:"edge",style:{"curve-style":"bezier","target-arrow-shape":"triangle","text-background-color":"white","text-background-shape":"rectangle",width:1}},{selector:".node--value-increase, .node--value-decrease",style:{"transition-property":"background-opacity","transition-duration":"0.5s"}},{selector:".node--value-increase",style:{"background-color":"#A4DE02","background-opacity":1,content:function(e){return"\u25b2"+e.data("label")}}},{selector:".node--value-decrease",style:{"background-color":"#E0371F","background-opacity":1,color:"white",content:function(e){return"\u25bc"+e.data("label")}}},{selector:".node--triggering",style:{}},{selector:".node--locked",style:{"background-color":"#eeeeee"}},{selector:".edge--triggering",style:{"line-color":"darkgreen","line-style":"dashed","target-arrow-color":"darkgreen",width:3}}],_=function(e){var n=k(),t=Object(u.a)(n,2),o=t[0],i=t[1],c=Object(r.useRef)(),s=Object(r.useRef)(e.editing),l=e.elements;return(s.current!==e.editing||s.current&&e.editing&&s.current.id!==e.editing.id)&&(l=l.map((function(n){return e&&e.editing&&(n=e.editing.id===n.data.id?Object(h.a)(Object(h.a)({},n),{},{classes:E.add(n.classes||"","node--editing")}):Object(h.a)(Object(h.a)({},n),{},{classes:E.remove(n.classes||"","node--editing")})),n}))),c.current={onTap:e.onTap,onEdgeCreate:e.onEdgeCreate},Object(r.useEffect)((function(){var e=o.current;e&&(e.on("tap",(function(e){c.current.onTap&&c.current.onTap(e)})),e.edgehandles({handleNodes:".snapse-node",preview:!1,loopAllowed:function(){return!0},edgeType:function(e,n){return e.edgesTo(n).empty()?"flat":void 0},complete:function(e,n,t){c.current.onEdgeCreate&&c.current.onEdgeCreate(e,n,t)}}))}),[o]),Object(r.useEffect)((function(){var n=o.current;n&&e.cxtMenus.map((function(e){return n.cxtmenu(e)}))}),[o,e.cxtMenus]),a.a.createElement(y.a,{cy:i,elements:l,style:{width:"100%",height:"100%"},stylesheet:w})},S=t(9),N=t(14),R={q1:{id:"q1",spikes:2,rules:["aa/aa->a;1"],out:["q2"],position:{x:300,y:250},isOutput:!1},q2:{id:"q2",spikes:2,isOutput:!0,position:{x:600,y:450}},q3:{id:"q3",spikes:1,rules:["a/a->a;2"],out:["q1","q4"],position:{x:100,y:100},isOutput:!1},q4:{id:"q4",spikes:1,rules:["a/a->a;4"],out:["q1","q3"],position:{x:100,y:350},isOutput:!1}};function C(e){return{spikes:e.spikes,delay:0}}function q(e){var n=/(a+)\/(a+)->(a+);([0-9]+)/.exec(e);if(n){var t=Object(u.a)(n,5),r=t[1],a=t[2],o=t[3],i=t[4],c=parseInt(i,10);return[r.length,a.length,o.length,c]}return!1}function I(e){return e.every(q)}function P(e,n){var t=!1,r=Object(N.a)(n,(function(n){var r={};for(var a in e){var o=e[a];n[a]=n[a]||C(o);var i=n[a];if(delete i.justResolvedRule,o.isOutput)a in r||(r[a]=0);else if(I(o.rules))if(i.delay>0){if(t=!0,i.delay--,0===i.delay&&i.rule){var c=q(i.rule),s=Object(u.a)(c,3),l=s[1],d=s[2];i.spikes-=l,i.justResolvedRule=i.rule,delete i.rule;var f,p=e[a].out,b=Object(S.a)(p);try{for(b.s();!(f=b.n()).done;){var v=f.value;r[v]=v in r?r[v]+d:d}}catch(k){b.e(k)}finally{b.f()}}}else if(0===i.delay&&o.out&&o.out.length>0){var g=o.rules[0],m=q(g),O=Object(u.a)(m,4),h=O[0],j=O[3];i.spikes===h&&(t=!0,i.rule=g,i.delay=j)}}for(var y in r)n[y].rule||(n[y].spikes+=r[y]),y in e&&e[y].isOutput&&(n[y].bitstring=(n[y].bitstring||"")+(r[y]||"0"))}));return t?r:n}var D=function(e,n,t,r,a,o,i){return[{data:{rootId:e,id:"".concat(e),label:r},classes:"snapse-node",position:{x:0,y:0}},{data:{rootId:e,id:"".concat(e,"-rules"),parent:e,label:a},classes:"snapse-node__rules",position:{x:n,y:t}},{data:{rootId:e,id:"".concat(e,"-spike"),parent:e,label:o},classes:"snapse-node__spike",position:{x:n,y:t+60}},{data:{rootId:e,id:"".concat(e,"-time"),parent:e,label:i},classes:"snapse-node__time",position:{x:n,y:t+90}}]},M=function(e,n,t,r,a,o){return[{data:{rootId:e,id:"".concat(e),label:r},classes:"snapse-output",position:{x:0,y:0}},{data:{rootId:e,id:"".concat(e,"-output"),parent:e,label:a},classes:"snapse-node__output",position:{x:n,y:t}},{data:{rootId:e,id:"".concat(e,"-spike"),parent:e,label:o},classes:"snapse-node__spike",position:{x:n,y:t+40}}]},T=function(e,n){return[{data:{id:"".concat(e,"-").concat(n),source:e,target:n},classes:""}]};var z=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=[];for(var a in e){var o=e[a],i=n[a]||C(o),c=t[o.id];if(o.isOutput)r=r.concat(M(o.id,o.position.x,o.position.y,o.id,i.bitstring||"",i.spikes));else{var u=I(o.rules),s=D(o.id,o.position.x,o.position.y,o.id,o.rules.join("\n"),i.spikes,i.delay);if(u||(s[1].classes=E.add(s[1].classes,"snapse-node__rules--invalid")),c&&(c.spikes<i.spikes?s[2].classes=E.add(s[2].classes,"node--value-increase"):c.spikes>i.spikes&&(s[2].classes=E.add(s[2].classes,"node--value-decrease")),c.delay<i.delay?s[3].classes=E.add(s[3].classes,"node--value-increase"):c.delay>i.delay&&(s[3].classes=E.add(s[3].classes,"node--value-decrease"))),i.rule&&(s[1].classes=E.add(s[1].classes,"node--locked")),i.justResolvedRule&&(s[1].classes=E.add(s[1].classes,"node--triggering")),r=r.concat(s),o.out){var l,d=Object(S.a)(o.out);try{for(d.s();!(l=d.n()).done;){var f=l.value,p=T(o.id,f);i.justResolvedRule&&(p[0].classes=E.add(p[0].classes,"edge--triggering")),r=r.concat(p)}}catch(b){d.e(b)}finally{d.f()}}}}return r};function F(){var e=Object(c.a)(["\n  background-color: rgba(244, 244, 244, 1);\n  margin: 2px;\n  outline-width: thin;\n  text-align: center;\n"]);return F=function(){return e},e}function A(){var e=Object(c.a)(["\n  background-color: rgba(244, 244, 244, 1);\n  height: 150px;\n  margin: 2px;\n  outline-width: thin;\n  text-align: center;\n  width: 100px;\n"]);return A=function(){return e},e}function J(){var e=Object(c.a)(["\n  display: flex;\n  flex-direction: column;\n  position: absolute;\n  text-align: center;\n  transform: translate3d(-50%, -50%, 0);\n"]);return J=function(){return e},e}function B(){var e=Object(c.a)(["\n  position: relative;\n  flex: 1;\n  width: 100%;\n  height: 100%;\n"]);return B=function(){return e},e}var $=5;var W=s.b.div(B()),X=s.b.div(J()),L=s.b.textarea(A()),V=s.b.input(F()),G=function(e){var n=function(e){var n=Object(r.useRef)();return Object(r.useEffect)((function(){n.current=e})),n}(e.neuronsState),t=Object(r.useMemo)((function(){return z(e.neurons,e.neuronsState,n.current)}),[e.neurons,e.neuronsState,n]),o=Object(r.useState)(null),i=Object(u.a)(o,2),c=i[0],s=i[1],l=Object(r.useRef)(null),d={onSurfaceClick:function(e,n){s({renderedPosition:e,position:n,rules:"",spike:""})},onCreateOutput:function(n){var t="q".concat($++);e.setNeurons((function(e){return Object(h.a)(Object(h.a)({},e),{},Object(O.a)({},t,{id:t,spikes:1,position:n,isOutput:!0}))}))},onEditNode:function(n,t,r){var a=e.neurons[n];if(!a.isOutput){var o=a.rules,i=a.spikes;s({id:n,renderedPosition:t,position:r,rules:o.join("\n"),spike:"".concat(i)})}},onDeleteNode:function(n){e.setNeurons((function(e){var t=Object(h.a)({},e);return delete t[n],t}))},onDeleteEdge:function(n,t){e.setNeurons((function(e){var r=Object(h.a)({},e),a=Object(h.a)({},r[n]);return!1===a.isOutput&&(a.out=a.out.filter((function(e){return e!==t}))),r}))}},f=Object(r.useRef)(d);f.current=d;var p=Object(r.useMemo)((function(){return[{selector:"core",commands:[{content:"Create Node",select:function(e,n){f.current.onSurfaceClick(n.renderedPosition,n.position)}},{content:"Create Output",select:function(e,n){f.current.onCreateOutput(n.position)}}]},{selector:"node",commands:[{content:"Edit Node",select:function(e){f.current.onEditNode(e.id(),e.renderedPosition(),e.position())}},{content:"Delete Node",select:function(e){f.current.onDeleteNode(e.id())}}]},{selector:"edge",commands:[{content:"Delete Edge",select:function(e){f.current.onDeleteEdge(e.data("source"),e.data("target"))}}]}]}),[f]);return a.a.createElement(W,null,a.a.createElement(_,{elements:t,editing:c,cxtMenus:p,onEdgeCreate:function(n,t,r){!function(n,t){var r=n;e.setNeurons((function(e){var n=Object(h.a)({},e),a=Object(h.a)({},n[r]);return!1===a.isOutput&&(a.out=[].concat(Object(m.a)(a.out),[t])),n[r]=a,n}))}(n.id(),t.id()),r.remove()}}),c&&a.a.createElement(X,{style:{left:null===c||void 0===c?void 0:c.renderedPosition.x,top:null===c||void 0===c?void 0:c.renderedPosition.y}},a.a.createElement("form",{onSubmit:function(n){if(n.preventDefault(),c){var t=parseInt(c.spike,10),r=isNaN(t)?0:t;if(null!=c.id){var a=c.id;e.setNeurons((function(e){return Object(h.a)(Object(h.a)({},e),{},Object(O.a)({},a,Object(h.a)(Object(h.a)({},e[a]),{},{rules:c.rules.trim().split("\n"),spikes:r})))}))}else{var o="q".concat($++);e.setNeurons((function(e){return Object(h.a)(Object(h.a)({},e),{},Object(O.a)({},o,{id:o,spikes:r,position:{x:c.position.x,y:c.position.y},rules:c.rules.trim().split("\n"),out:[],isOutput:!1}))}))}s(null)}}},a.a.createElement("div",null,a.a.createElement("label",null,"Rules")),a.a.createElement("div",null,a.a.createElement(L,{autoFocus:!0,ref:l,value:null===c||void 0===c?void 0:c.rules,onChange:function(e){var n=e.target.value;s((function(e){return e?Object(h.a)(Object(h.a)({},e),{},{rules:n}):null}))}})),a.a.createElement("div",null,a.a.createElement("label",null,"Initial Spikes")),a.a.createElement("div",null,a.a.createElement(V,{placeholder:"0",type:"number",value:null===c||void 0===c?void 0:c.spike,onChange:function(e){var n=e.target.value;s((function(e){return e?Object(h.a)(Object(h.a)({},e),{},{spike:n}):null}))}})),a.a.createElement("div",null,a.a.createElement("button",null,"Save Node")))))};function H(){var e=Object(c.a)(["\n  background-color: #007bff;\n  border-color: #007bff;\n  border-radius: 4px;\n  border: 0;\n  color: #fff;\n  cursor: pointer;\n  display: block;\n  font-size: 14px;\n  margin-bottom: 4px;\n  padding: 8px;\n  text-transform: uppercase;\n  transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out,\n    border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;\n  width: 100%;\n  &:hover {\n    color: #fff;\n    background-color: #0069d9;\n    border-color: #0062cc;\n  }\n  &:focus {\n    box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.5);\n  }\n  &:active {\n    background-color: #0062cc;\n    border-color: #005cbf;\n  }\n"]);return H=function(){return e},e}var K=s.b.button(H());function Q(){var e=Object(c.a)(["\n  font-family: montserrat;\n  font-weight: 400;\n"]);return Q=function(){return e},e}var U=s.b.p(Q());function Y(){var e=Object(c.a)([""]);return Y=function(){return e},e}function Z(){var e=Object(c.a)([""]);return Z=function(){return e},e}function ee(){var e=Object(c.a)([""]);return ee=function(){return e},e}function ne(){var e=Object(c.a)(["\n  font-size: 13px;\n  text-align: center;\n  margin-top: 4px;\n  margin-bottom: 8px;\n"]);return ne=function(){return e},e}function te(){var e=Object(c.a)(["\n  margin: 0;\n  text-align: center;\n"]);return te=function(){return e},e}function re(){var e=Object(c.a)(["\n  border-style: solid;\n  border-width: 0;\n  border-right-width: 1px;\n  border-color: #e1e4e8;\n  padding: 20px;\n  height: 100%;\n"]);return re=function(){return e},e}function ae(){var e=Object(c.a)(["\n      animation: "," 1s linear;\n    "]);return ae=function(){return e},e}function oe(){var e=Object(c.a)(["\n  ","\n  background-color: red;\n  height: 4px;\n  transform-origin: left center;\n  width: 100%;\n"]);return oe=function(){return e},e}function ie(){var e=Object(c.a)(["\n  from {\n    transform: scaleX(100%);\n  }\n\n  to {\n    transform: scaleX(0%);\n  }\n"]);return ie=function(){return e},e}var ce=Object(s.c)(ie()),ue=s.b.div(oe(),(function(e){return e.isPlaying&&Object(s.a)(ae(),ce)})),se=s.b.div(re()),le=Object(s.b)(U).attrs((function(){return{as:"h1"}}))(te()),de=Object(s.b)(U).attrs((function(){return{as:"h3"}}))(ne()),fe=Object(s.b)(K)(ee()),pe=Object(s.b)(K)(Z()),be=Object(s.b)(K)(Y()),ve=function(){var e=Object(r.useState)(R),n=Object(u.a)(e,2),t=n[0],o=n[1],i=Object(r.useState)(!1),c=Object(u.a)(i,2),s=c[0],l=c[1],d=Object(r.useState)((function(){return function(e){var n={};for(var t in e){var r=e[t];n[t]=C(r)}return n}(t)})),f=Object(u.a)(d,2),b=f[0],v=f[1],g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t;v((function(n){return P(e,n)}))},m=Object(r.useState)(0),O=Object(u.a)(m,2),h=O[0],j=O[1];Object(r.useRef)(t).current=t;var y=Object(r.useRef)(g);return y.current=function(){g(t),j((function(e){return e+1}))},Object(r.useEffect)((function(){var e;return s&&(e=setInterval((function(){y.current()}),1e3)),function(){return clearInterval(e)}}),[s,y]),a.a.createElement(p,{main:a.a.createElement(G,{neurons:t,neuronsState:b,setNeurons:o}),side:a.a.createElement(se,null,a.a.createElement(le,null,"Snapse"),a.a.createElement(de,null,"Modern Spiking Neural P systems Maker and Visualizer"),a.a.createElement(fe,{onClick:function(){}},"Back"),a.a.createElement(ue,{key:h,isPlaying:s}),a.a.createElement(pe,{onClick:function(){l((function(e){return!e}))}},s?"Pause":"Play"),a.a.createElement(be,{onClick:function(){return g()}},"Forward"),a.a.createElement("br",null),a.a.createElement("br",null),a.a.createElement("br",null),a.a.createElement("br",null),a.a.createElement(K,{onClick:function(){window.localStorage.setItem("neurons",JSON.stringify(t))}},"Save"),a.a.createElement(K,{onClick:function(){o(JSON.parse(window.localStorage.getItem("neurons")||""))}},"Load"),a.a.createElement(K,{onClick:function(){o(R)}},"Reset"))})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(40);var ge=t(11),me=t.n(ge),Oe=t(22),he=t.n(Oe),je=t(23),ye=t.n(je);me.a.use(he.a),me.a.use(ye.a),i.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(ve,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[25,1,2]]]);
//# sourceMappingURL=main.6671e1ba.chunk.js.map