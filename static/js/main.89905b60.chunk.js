(this.webpackJsonpsnapse=this.webpackJsonpsnapse||[]).push([[0],{25:function(e,n,t){e.exports=t(43)},30:function(e,n,t){},43:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),o=t(12),i=t.n(o),c=(t(30),t(1)),u=t(4),s=t(9),l=t(2);function d(){var e=Object(c.a)(["\n  flex-direction: column;\n  flex-shrink: 0;\n  height: 100%;\n  width: 250px;\n  z-index: 2;\n"]);return d=function(){return e},e}function f(){var e=Object(c.a)(["\n  flex-direction: column;\n  flex: 1;\n  height: 100%;\n"]);return f=function(){return e},e}function p(){var e=Object(c.a)(["\n  display: flex;\n  flex-direction: row;\n  flex: 1;\n  height: 100%;\n  width: 100%;\n"]);return p=function(){return e},e}var b=function(e){return a.a.createElement(v,null,a.a.createElement(m,null,e.side),a.a.createElement(g,null,e.main))},v=l.b.div(p()),g=l.b.div(f()),m=l.b.div(d()),O=t(24),h=t(6),j=t(3),y=t(21),x=t.n(y);var k=function(){var e=Object(r.useRef)(null);return Object(r.useEffect)((function(){var n,t=e.current,r=0;return function e(){r++,t&&t.edges().animate({style:{"line-dash-offset":-r}}),n=requestAnimationFrame(e)}(),function(){n&&cancelAnimationFrame(n)}}),[]),[e,function(n){e.current=n}]};function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0;return!!e.match(new RegExp("(\\s|^)"+n+"(\\s|$)"))}var w={has:E,add:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0;return E(e,n)?e:e+" "+n},remove:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0;if(E(e,n)){var t=new RegExp("(\\s|^)"+n+"(\\s|$)");return e.replace(t," ")}return e}};var _=[{selector:".node--editing",style:{opacity:0}},{selector:".snapse-node, .snapse-output",style:{"background-opacity":"0","padding-top":"0","border-width":0,"text-halign":"left","text-valign":"top",color:"black",content:"data(label)"}},{selector:".snapse-node__rules, .snapse-node__output",style:{"background-color":"white","border-width":1,events:"no","text-wrap":"wrap","text-halign":"center","text-valign":"center",content:"data(label)",height:150,shape:"roundrectangle",width:100}},{selector:".snapse-node__rules--invalid",style:{"background-color":"#ffbbbb","border-color":"#ff4e4d"}},{selector:".snapse-node__output",style:{height:50,width:150}},{selector:".snapse-node__time, .snapse-node__spike",style:{"background-opacity":"0","text-halign":"center","text-valign":"center",content:"data(label)",events:"no",height:15,shape:"roundrectangle",width:50}},{selector:"edge",style:{"curve-style":"bezier","target-arrow-shape":"triangle","text-background-color":"white","text-background-shape":"rectangle",width:1}},{selector:".node--value-increase, .node--value-decrease",style:{"transition-property":"background-opacity","transition-duration":"0.5s"}},{selector:".node--value-increase",style:{"background-color":"#A4DE02","background-opacity":1,content:function(e){return"\u25b2"+e.data("label")}}},{selector:".node--value-decrease",style:{"background-color":"#E0371F","background-opacity":1,color:"white",content:function(e){return"\u25bc"+e.data("label")}}},{selector:".node--triggering",style:{}},{selector:".edge--triggering",style:{"line-color":"darkgreen","line-style":"dashed","target-arrow-color":"darkgreen",width:3}}],N=function(e){var n=k(),t=Object(u.a)(n,2),o=t[0],i=t[1],c=Object(r.useRef)(),s=Object(r.useRef)(e.editing),l=e.elements;return(s.current!==e.editing||s.current&&e.editing&&s.current.id!==e.editing.id)&&(l=l.map((function(n){return e&&e.editing&&(n=e.editing.id===n.data.id?Object(j.a)(Object(j.a)({},n),{},{classes:w.add(n.classes||"","node--editing")}):Object(j.a)(Object(j.a)({},n),{},{classes:w.remove(n.classes||"","node--editing")})),n}))),c.current={onTap:e.onTap,onEdgeCreate:e.onEdgeCreate},Object(r.useEffect)((function(){var e=o.current;e&&(e.on("tap",(function(e){c.current.onTap&&c.current.onTap(e)})),e.edgehandles({handleNodes:".snapse-node",preview:!1,loopAllowed:function(){return!0},edgeType:function(e,n){return e.edgesTo(n).empty()?"flat":void 0},complete:function(e,n,t){c.current.onEdgeCreate&&c.current.onEdgeCreate(e,n,t)}}))}),[o]),Object(r.useEffect)((function(){var n=o.current;n&&e.cxtMenus.map((function(e){return n.cxtmenu(e)}))}),[o,e.cxtMenus]),a.a.createElement(x.a,{cy:i,elements:l,style:{width:"100%",height:"100%"},stylesheet:_})};function R(){var e=Object(c.a)(["\n  background-color: rgba(244, 244, 244, 1);\n  margin: 2px;\n  outline-width: thin;\n  text-align: center;\n"]);return R=function(){return e},e}function q(){var e=Object(c.a)(["\n  background-color: rgba(244, 244, 244, 1);\n  height: 150px;\n  margin: 2px;\n  outline-width: thin;\n  text-align: center;\n  width: 100px;\n"]);return q=function(){return e},e}function C(){var e=Object(c.a)(["\n  display: flex;\n  flex-direction: column;\n  position: absolute;\n  text-align: center;\n  transform: translate3d(-50%, -50%, 0);\n"]);return C=function(){return e},e}function I(){var e=Object(c.a)(["\n  position: relative;\n  flex: 1;\n  width: 100%;\n  height: 100%;\n"]);return I=function(){return e},e}var S=5;var P=l.b.div(I()),D=l.b.div(C()),M=l.b.textarea(q()),T=l.b.input(R()),z=function(e){var n=e.elements,t=Object(r.useState)(null),o=Object(u.a)(t,2),i=o[0],c=o[1],s=Object(r.useRef)(null),l={onSurfaceClick:function(e){c({renderedPosition:e.renderedPosition,position:e.position,rules:"",spike:""})},onCreateOutput:function(n){var t="q".concat(S++);e.setNeurons((function(e){return Object(j.a)(Object(j.a)({},e),{},Object(h.a)({},t,{id:t,spikes:1,position:{x:n.position.x,y:n.position.y},isOutput:!0}))}))},onEditNode:function(e,t){var r,a,o=e.id(),i=null===(r=n.find((function(e){return e.data.id==="".concat(o,"-rules")})))||void 0===r?void 0:r.data.label,u=null===(a=n.find((function(e){return e.data.id==="".concat(o,"-spike")})))||void 0===a?void 0:a.data.label;c({id:o,renderedPosition:e.renderedPosition(),position:e.position(),rules:i,spike:u})},onDeleteNode:function(n){e.setNeurons((function(e){var t=Object(j.a)({},e);return delete t[n],t}))},onDeleteEdge:function(n){var t=n.data("source"),r=n.data("target");e.setNeurons((function(e){var n=Object(j.a)({},e),a=Object(j.a)({},n[t]);return!1===a.isOutput&&(a.out=a.out.filter((function(e){return e!==r}))),n}))}},d=Object(r.useRef)(l);d.current=l;var f=Object(r.useMemo)((function(){return[{selector:"core",commands:[{content:"Create Node",select:function(e,n){d.current.onSurfaceClick(n)}},{content:"Create Output",select:function(e,n){d.current.onCreateOutput(n)}}]},{selector:"node",commands:[{content:"Edit Node",select:function(e,n){d.current.onEditNode(e,n)}},{content:"Delete Node",select:function(e){d.current.onDeleteNode(e.id())}}]},{selector:"edge",commands:[{content:"Delete Edge",select:function(e){d.current.onDeleteEdge(e)}}]}]}),[d]);return a.a.createElement(P,null,a.a.createElement(N,{elements:e.elements,editing:i,cxtMenus:f,onEdgeCreate:function(n,t,r){var a=n.id();e.setNeurons((function(e){var n=Object(j.a)({},e),r=Object(j.a)({},n[a]);return!1===r.isOutput&&(r.out=[].concat(Object(O.a)(r.out),[t.id()])),n[a]=r,n})),r.remove()}}),i&&a.a.createElement(D,{style:{left:null===i||void 0===i?void 0:i.renderedPosition.x,top:null===i||void 0===i?void 0:i.renderedPosition.y}},a.a.createElement("form",{onSubmit:function(n){if(n.preventDefault(),i){var t=parseInt(i.spike,10),r=isNaN(t)?0:t;if(null!=i.id){var a=i.id;e.setNeurons((function(e){return Object(j.a)(Object(j.a)({},e),{},Object(h.a)({},a,Object(j.a)(Object(j.a)({},e[a]),{},{rules:i.rules.trim().split("\n"),spikes:r})))}))}else{var o="q".concat(S++);e.setNeurons((function(e){return Object(j.a)(Object(j.a)({},e),{},Object(h.a)({},o,{id:o,spikes:r,position:{x:i.position.x,y:i.position.y},rules:i.rules.trim().split("\n"),out:[],isOutput:!1}))}))}c(null)}}},a.a.createElement("div",null,a.a.createElement("label",null,"Rules")),a.a.createElement("div",null,a.a.createElement(M,{autoFocus:!0,ref:s,value:null===i||void 0===i?void 0:i.rules,onChange:function(e){var n=e.target.value;c((function(e){return e?Object(j.a)(Object(j.a)({},e),{},{rules:n}):null}))}})),a.a.createElement("div",null,a.a.createElement("label",null,"Initial Spikes")),a.a.createElement("div",null,a.a.createElement(T,{placeholder:"0",type:"number",value:null===i||void 0===i?void 0:i.spike,onChange:function(e){var n=e.target.value;c((function(e){return e?Object(j.a)(Object(j.a)({},e),{},{spike:n}):null}))}})),a.a.createElement("div",null,a.a.createElement("button",null,"Save Node")))))},F=t(14),A={q1:{id:"q1",spikes:2,rules:["aa/aa->a;1"],out:["q2"],position:{x:300,y:250},isOutput:!1},q2:{id:"q2",spikes:2,isOutput:!0,position:{x:600,y:450}},q3:{id:"q3",spikes:1,rules:["a/a->a;2"],out:["q1","q4"],position:{x:100,y:100},isOutput:!1},q4:{id:"q4",spikes:1,rules:["a/a->a;4"],out:["q1","q3"],position:{x:100,y:350},isOutput:!1}};function B(e){return{spikes:e.spikes,delay:0}}function $(e){var n=/(a+)\/(a+)->(a+);([0-9]+)/.exec(e);if(n){var t=Object(u.a)(n,5),r=t[1],a=t[2],o=t[3],i=t[4],c=parseInt(i,10);return[r.length,a.length,o.length,c]}return!1}function J(e){return e.every($)}function W(e,n){var t=!1,r=Object(F.a)(n,(function(n){var r={};for(var a in e){var o=e[a];n[a]=n[a]||B(o);var i=n[a];if(delete i.justResolvedRule,o.isOutput)a in r||(r[a]=0);else if(J(o.rules))if(i.delay>0){if(t=!0,i.delay--,0===i.delay&&i.rule){var c=$(i.rule),l=Object(u.a)(c,3),d=l[1],f=l[2];i.spikes-=d,i.justResolvedRule=i.rule,delete i.rule;var p,b=e[a].out,v=Object(s.a)(b);try{for(v.s();!(p=v.n()).done;){var g=p.value;r[g]=g in r?r[g]+f:f}}catch(k){v.e(k)}finally{v.f()}}}else if(0===i.delay&&o.out&&o.out.length>0){var m=o.rules[0],O=$(m),h=Object(u.a)(O,4),j=h[0],y=h[3];i.spikes===j&&(t=!0,i.rule=m,i.delay=y)}}for(var x in r)n[x].spikes+=r[x],x in e&&e[x].isOutput&&(n[x].bitstring=(n[x].bitstring||"")+(r[x]||"0"))}));return t?r:n}var X=function(e,n,t,r,a,o,i){return[{data:{rootId:e,id:"".concat(e),label:r},classes:"snapse-node",position:{x:0,y:0}},{data:{rootId:e,id:"".concat(e,"-rules"),parent:e,label:a},classes:"snapse-node__rules",position:{x:n,y:t}},{data:{rootId:e,id:"".concat(e,"-spike"),parent:e,label:o},classes:"snapse-node__spike",position:{x:n,y:t+60}},{data:{rootId:e,id:"".concat(e,"-time"),parent:e,label:i},classes:"snapse-node__time",position:{x:n,y:t+90}}]},V=function(e,n,t,r,a,o){return[{data:{rootId:e,id:"".concat(e),label:r},classes:"snapse-output",position:{x:0,y:0}},{data:{rootId:e,id:"".concat(e,"-output"),parent:e,label:a},classes:"snapse-node__output",position:{x:n,y:t}},{data:{rootId:e,id:"".concat(e,"-spike"),parent:e,label:o},classes:"snapse-node__spike",position:{x:n,y:t+40}}]},G=function(e,n){return[{data:{id:"".concat(e,"-").concat(n),source:e,target:n},classes:""}]};function H(){var e=Object(c.a)(["\n  background-color: #007bff;\n  border-color: #007bff;\n  border-radius: 4px;\n  border: 0;\n  color: #fff;\n  cursor: pointer;\n  display: block;\n  font-size: 14px;\n  margin-bottom: 4px;\n  padding: 8px;\n  text-transform: uppercase;\n  transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out,\n    border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;\n  width: 100%;\n  &:hover {\n    color: #fff;\n    background-color: #0069d9;\n    border-color: #0062cc;\n  }\n  &:focus {\n    box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.5);\n  }\n  &:active {\n    background-color: #0062cc;\n    border-color: #005cbf;\n  }\n"]);return H=function(){return e},e}var K=l.b.button(H());function L(){var e=Object(c.a)(["\n  font-family: montserrat;\n  font-weight: 400;\n"]);return L=function(){return e},e}var Q=l.b.p(L());function U(){var e=Object(c.a)([""]);return U=function(){return e},e}function Y(){var e=Object(c.a)([""]);return Y=function(){return e},e}function Z(){var e=Object(c.a)([""]);return Z=function(){return e},e}function ee(){var e=Object(c.a)(["\n  font-size: 13px;\n  text-align: center;\n  margin-top: 4px;\n  margin-bottom: 8px;\n"]);return ee=function(){return e},e}function ne(){var e=Object(c.a)(["\n  margin: 0;\n  text-align: center;\n"]);return ne=function(){return e},e}function te(){var e=Object(c.a)(["\n  border-style: solid;\n  border-width: 0;\n  border-right-width: 1px;\n  border-color: #e1e4e8;\n  padding: 20px;\n  height: 100%;\n"]);return te=function(){return e},e}function re(){var e=Object(c.a)(["\n      animation: "," 1s linear;\n    "]);return re=function(){return e},e}function ae(){var e=Object(c.a)(["\n  ","\n  background-color: red;\n  height: 4px;\n  transform-origin: left center;\n  width: 100%;\n"]);return ae=function(){return e},e}function oe(){var e=Object(c.a)(["\n  from {\n    transform: scaleX(100%);\n  }\n\n  to {\n    transform: scaleX(0%);\n  }\n"]);return oe=function(){return e},e}var ie=Object(l.c)(oe()),ce=l.b.div(ae(),(function(e){return e.isPlaying&&Object(l.a)(re(),ie)})),ue=l.b.div(te()),se=Object(l.b)(Q).attrs((function(){return{as:"h1"}}))(ne()),le=Object(l.b)(Q).attrs((function(){return{as:"h3"}}))(ee()),de=Object(l.b)(K)(Z()),fe=Object(l.b)(K)(Y()),pe=Object(l.b)(K)(U()),be=function(){var e=Object(r.useState)(!1),n=Object(u.a)(e,2),t=n[0],o=n[1],i=Object(r.useState)(A),c=Object(u.a)(i,2),l=c[0],d=c[1],f=Object(r.useState)((function(){return function(e){var n={};for(var t in e){var r=e[t];n[t]=B(r)}return n}(l)})),p=Object(u.a)(f,2),v=p[0],g=p[1],m=function(e){var n=Object(r.useRef)();return Object(r.useEffect)((function(){n.current=e})),n}(v),O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l;g((function(n){return W(e,n)}))},h=Object(r.useMemo)((function(){return function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=[];for(var a in e){var o=e[a],i=n[a]||B(o),c=t[o.id];if(o.isOutput)r=r.concat(V(o.id,o.position.x,o.position.y,o.id,i.bitstring||"",i.spikes));else{var u=J(o.rules),l=X(o.id,o.position.x,o.position.y,o.id,o.rules.join("\n"),i.spikes,i.delay);if(u||(l[1].classes=w.add(l[1].classes,"snapse-node__rules--invalid")),c&&(c.spikes<i.spikes?l[2].classes=w.add(l[2].classes,"node--value-increase"):c.spikes>i.spikes&&(l[2].classes=w.add(l[2].classes,"node--value-decrease")),c.delay<i.delay?l[3].classes=w.add(l[3].classes,"node--value-increase"):c.delay>i.delay&&(l[3].classes=w.add(l[3].classes,"node--value-decrease"))),i.justResolvedRule&&(l[1].classes=w.add(l[1].classes,"node--triggering")),r=r.concat(l),o.out){var d,f=Object(s.a)(o.out);try{for(f.s();!(d=f.n()).done;){var p=d.value,b=G(o.id,p);i.justResolvedRule&&(b[0].classes=w.add(b[0].classes,"edge--triggering")),r=r.concat(b)}}catch(v){f.e(v)}finally{f.f()}}}}return r}(l,v,m.current)}),[l,v,m]),j=Object(r.useState)(0),y=Object(u.a)(j,2),x=y[0],k=y[1];Object(r.useRef)(l).current=l;var E=Object(r.useRef)(O);return E.current=function(){O(l),k((function(e){return e+1}))},Object(r.useEffect)((function(){var e;return t&&(e=setInterval((function(){E.current()}),1e3)),function(){return clearInterval(e)}}),[t,E]),a.a.createElement(b,{main:a.a.createElement(z,{elements:h,setNeurons:d}),side:a.a.createElement(ue,null,a.a.createElement(se,null,"Snapse"),a.a.createElement(le,null,"Modern Spiking Neural P systems Maker and Visualizer"),a.a.createElement(de,{onClick:function(){}},"Back"),a.a.createElement(ce,{key:x,isPlaying:t}),a.a.createElement(fe,{onClick:function(){o((function(e){return!e}))}},t?"Pause":"Play"),a.a.createElement(pe,{onClick:function(){return O()}},"Forward"))})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(40);var ve=t(11),ge=t.n(ve),me=t(22),Oe=t.n(me),he=t(23),je=t.n(he);ge.a.use(Oe.a),ge.a.use(je.a),i.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(be,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[25,1,2]]]);
//# sourceMappingURL=main.89905b60.chunk.js.map